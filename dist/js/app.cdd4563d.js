(function(){"use strict";var e={1409:function(e,t,n){var s=n(5130),i=n(6768);const o={id:"app"};function l(e,t,n,s,l,a){const u=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(u)])}var a={name:"App"},u=n(1241);const r=(0,u.A)(a,[["render",l]]);var c=r,d=n(1387),h=n(4232);const p={class:"quiz-wrapper"},k={key:0,class:"popup"},m={class:"popup-content"},v={class:"sidebar"},f=["onClick"],Q={class:"quiz-content"},g={class:"timer",style:{color:"aliceblue",float:"right"}},b={class:"ism",style:{color:"aliceblue",float:"right"}},L={class:"question-text"},y={class:"options"},w=["onClick"],x={class:"option-label"},C=["name","value"],E={key:0,class:"result-popup"},I={class:"popup-content"},S={class:"quiz-footer"};function T(e,t,n,o,l,a){return(0,i.uX)(),(0,i.CE)("div",p,[l.showPopup?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.Lk)("div",m,[t[7]||(t[7]=(0,i.Lk)("h2",null,"Ismingizni kiriting",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),placeholder:"Ismingizni kiriting"},null,512),[[s.Jo,l.username]]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.startTest&&a.startTest(...e))},"Testni boshlash")])])):(0,i.Q3)("",!0),(0,i.Lk)("aside",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.displayedQuestions,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:(0,h.C4)(["question-circle",{active:t===l.currentQuestionIndex,answered:void 0!==l.answers[t]}]),onClick:e=>a.goToQuestion(t)},(0,h.v_)(t+1),11,f)))),128))]),(0,i.Lk)("div",Q,[(0,i.Lk)("div",{class:"question-mark",onClick:t[2]||(t[2]=(...e)=>a.openTelegram&&a.openTelegram(...e)),style:{cursor:"pointer"}}," Dasturchi: Husenov Abdullo "),t[12]||(t[12]=(0,i.Lk)("div",{class:"logo"},null,-1)),(0,i.Lk)("div",g,"Qolgan vaqt: "+(0,h.v_)(a.formattedTime),1),t[13]||(t[13]=(0,i.eW)()),t[14]||(t[14]=(0,i.Lk)("br",null,null,-1)),t[15]||(t[15]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("div",b,"Foydalanuvchi: "+(0,h.v_)(l.username)+"  ",1),t[16]||(t[16]=(0,i.Lk)("br",null,null,-1)),t[17]||(t[17]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("h2",L,(0,h.v_)(l.displayedQuestions[l.currentQuestionIndex].text),1),(0,i.Lk)("div",y,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.displayedQuestions[l.currentQuestionIndex].options,((e,n)=>((0,i.uX)(),(0,i.CE)("div",{key:n,class:"option",onClick:t=>l.answers[l.currentQuestionIndex]=e},[(0,i.Lk)("label",null,[(0,i.Lk)("span",x,(0,h.v_)(a.getOptionLetter(n)),1),(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"q"+l.currentQuestionIndex,value:e,"onUpdate:modelValue":t[3]||(t[3]=e=>l.answers[l.currentQuestionIndex]=e)},null,8,C),[[s.XL,l.answers[l.currentQuestionIndex]]]),(0,i.eW)(" "+(0,h.v_)(e),1)])],8,w)))),128))]),l.showResultPopup?((0,i.uX)(),(0,i.CE)("div",E,[(0,i.Lk)("div",I,[t[11]||(t[11]=(0,i.Lk)("h2",null,"Test natijalari",-1)),(0,i.Lk)("p",null,[t[8]||(t[8]=(0,i.Lk)("strong",null,"Foydalanuvchi:",-1)),(0,i.eW)(" "+(0,h.v_)(l.testResult.username),1)]),(0,i.Lk)("p",null,[t[9]||(t[9]=(0,i.Lk)("strong",null,"To‘g‘ri javoblar:",-1)),(0,i.eW)(" "+(0,h.v_)(l.testResult.score)+" / "+(0,h.v_)(l.testResult.total),1)]),(0,i.Lk)("p",null,[t[10]||(t[10]=(0,i.Lk)("strong",null,"Foiz:",-1)),(0,i.eW)(" "+(0,h.v_)(l.testResult.percentage)+"%",1)]),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>a.closeResultPopup&&a.closeResultPopup(...e))},"Yopish")])])):(0,i.Q3)("",!0),(0,i.Lk)("div",S,[a.isLastQuestion?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[6]||(t[6]=(...e)=>a.submitTest&&a.submitTest(...e))},"Yakunlash")):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>a.nextQuestion&&a.nextQuestion(...e))},"Keyingisi"))])])])}n(8111),n(116),n(7588),n(1701);var _=n(4373),q={data(){return{username:"",showPopup:!0,currentQuestionIndex:0,displayedQuestions:[],answers:[],timeLeft:3600,timer:null,showResultPopup:!1,testResult:null,startTime:null}},created(){this.fetchQuestions(),window.addEventListener("beforeunload",this.preventRefresh)},beforeUnmount(){window.removeEventListener("beforeunload",this.preventRefresh)},computed:{isLastQuestion(){return this.currentQuestionIndex===this.displayedQuestions.length-1},formattedTime(){const e=Math.floor(this.timeLeft/60),t=this.timeLeft%60;return`${e}:${t<10?"0":""}${t}`}},methods:{openTelegram(){window.open("https://t.me/chiko_uz","_blank")},async fetchQuestions(){try{const e=await _.A.get("http://10.100.0.15/api/v1/random-tests/");this.displayedQuestions=e.data.map((e=>({text:e.question,options:e.answers.map((e=>e.answer)),correct:e.answers.find((e=>e.is_correct))?.answer})))}catch(e){console.error("Testlarni olishda xatolik:",e),alert("Testlarni yuklashda xatolik yuz berdi")}},preventRefresh(e){e.preventDefault(),e.returnValue="Test jarayonida sahifani yangilash mumkin emas!"},closeResultPopup(){this.showResultPopup=!1,this.username="",this.answers=[],this.currentQuestionIndex=0,this.timeLeft=3600,this.showPopup=!0,this.fetchQuestions()},getOptionLetter(e){return String.fromCharCode(65+e)},nextQuestion(){this.currentQuestionIndex<this.displayedQuestions.length-1&&this.currentQuestionIndex++},goToQuestion(e){this.currentQuestionIndex=e},startTest(){this.username?(this.showPopup=!1,this.startTime=Date.now(),this.startTimer()):alert("Ismingizni kiriting!")},startTimer(){this.timer=setInterval((()=>{this.timeLeft>0?this.timeLeft--:(clearInterval(this.timer),this.submitTest())}),1e3)},async submitTest(){clearInterval(this.timer);let e=0;this.displayedQuestions.forEach(((t,n)=>{this.answers[n]===t.correct&&e++}));let t=this.displayedQuestions.length,n=(e/t*100).toFixed(2),s=Math.floor((Date.now()-this.startTime)/1e3),i=Math.floor(s/60),o=s%60,l=`${i}:${o<10?"0":""}${o}`;this.testResult={username:this.username,score:e,total:t,percentage:n,time:l},this.showResultPopup=!0;try{await _.A.post("http://10.100.0.15/api/v1/test-results/",{fish:this.username,correct_answers:e,incorrect_answers:t-e,percentage:parseFloat(n),time:l})}catch(a){console.error("Natijalarni yuborishda xatolik:",a),alert("Natijalarni yuborishda xatolik yuz berdi")}}}};const O=(0,u.A)(q,[["render",T],["__scopeId","data-v-a6921252"]]);var R=O;const X={border:"1"},j=["onUpdate:modelValue","placeholder"],A=["onClick"],F=["disabled"],J={key:0},P=["onUpdate:modelValue","placeholder"],z=["onClick"],N={key:1},V=["onClick"];function B(e,t,n,o,l,a){return(0,i.uX)(),(0,i.CE)("div",null,[t[15]||(t[15]=(0,i.Lk)("h2",null,"Admin Paneli",-1)),t[16]||(t[16]=(0,i.Lk)("h3",null,"Foydalanuvchilar natijalari",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.downloadResultsAsExcel&&a.downloadResultsAsExcel(...e))},"Excel formatida yuklab olish"),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.clearResults&&a.clearResults(...e))},"Barcha natijalarni o‘chirish"),(0,i.Lk)("table",X,[t[13]||(t[13]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"#"),(0,i.Lk)("th",null,"Foydalanuvchi"),(0,i.Lk)("th",null,"Ball"),(0,i.Lk)("th",null,"Jami Savollar"),(0,i.Lk)("th",null,"Foiz")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.userResults,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:t},[(0,i.Lk)("td",null,(0,h.v_)(t+1),1),(0,i.Lk)("td",null,(0,h.v_)(e.name||e.username),1),(0,i.Lk)("td",null,(0,h.v_)(e.score),1),(0,i.Lk)("td",null,(0,h.v_)(e.total||"-"),1),(0,i.Lk)("td",null,(0,h.v_)(e.percentage||"-")+"%",1)])))),128))])]),(0,i.Lk)("div",null,[t[14]||(t[14]=(0,i.Lk)("h3",null,"Yangi savol qo‘shish",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.newQuestion.text=e),placeholder:"Savolni kiriting"},null,512),[[s.Jo,l.newQuestion.text]]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.newQuestion.options,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t},[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":e=>l.newQuestion.options[t]=e,placeholder:"Variant "+(t+1)},null,8,j),[[s.Jo,l.newQuestion.options[t]]]),(0,i.Lk)("button",{onClick:e=>a.removeOption(t)},"X",8,A)])))),128)),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.addOption&&a.addOption(...e))},"Variant qo‘shish"),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.newQuestion.correct=e),placeholder:"To‘g‘ri javobni kiriting"},null,512),[[s.Jo,l.newQuestion.correct]]),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>a.addQuestion&&a.addQuestion(...e))},"Savol qo‘shish")]),t[17]||(t[17]=(0,i.Lk)("h3",null,"Test fayl yuklash",-1)),(0,i.Lk)("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>a.uploadFile&&a.uploadFile(...e)),accept:".docx"},null,32),t[18]||(t[18]=(0,i.Lk)("h3",null,"Mavjud test savollari",-1)),(0,i.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>a.toggleSelectAll&&a.toggleSelectAll(...e))},(0,h.v_)(l.selectAll?"Barchasini bekor qilish":"Barchasini tanlash"),1),(0,i.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>a.removeSelectedQuestions&&a.removeSelectedQuestions(...e)),disabled:!l.selectedQuestions.length},"Tanlanganlarni o‘chirish",8,F),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.questions,((e,n)=>((0,i.uX)(),(0,i.CE)("li",{key:n},[l.editedIndex===n?((0,i.uX)(),(0,i.CE)("div",J,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.editedQuestion.text=e),placeholder:"Savolni kiriting"},null,512),[[s.Jo,l.editedQuestion.text]]),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.editedQuestion.options,((e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t},[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":e=>l.editedQuestion.options[t]=e,placeholder:"Variant "+(t+1)},null,8,P),[[s.Jo,l.editedQuestion.options[t]]])])))),128))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.editedQuestion.correct=e),placeholder:"To‘g‘ri javobni kiriting"},null,512),[[s.Jo,l.editedQuestion.correct]]),(0,i.Lk)("button",{onClick:e=>a.saveEdit(n)},"Saqlash",8,z),(0,i.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>a.cancelEdit&&a.cancelEdit(...e))},"Bekor qilish")])):((0,i.uX)(),(0,i.CE)("div",N,[(0,i.eW)((0,h.v_)(e.text)+" ",1),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.options,((e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t},(0,h.v_)(e),1)))),128))]),(0,i.eW)(" (To‘g‘ri javob: "+(0,h.v_)(e.correct)+") ",1),(0,i.Lk)("button",{onClick:e=>a.editQuestion(n)},"Tahrirlash",8,V)]))])))),128))]),(0,i.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>a.downloadQuestions&&a.downloadQuestions(...e))},"Word formatida yuklab olish")])}n(4114),n(2489),n(3579);var U=n(5084),W=n.n(U),$=n(5975),K=n(3688),M={data(){return{questions:JSON.parse(localStorage.getItem("testQuestions"))||[],selectedQuestions:[],selectAll:!1,userResults:JSON.parse(localStorage.getItem("testResults"))||[],newQuestion:{text:"",options:["","","",""],correct:""},file:null,editedIndex:null,editedQuestion:{text:"",options:["","","",""],correct:""}}},methods:{clearResults(){confirm("Barcha natijalarni o‘chirmoqchimisiz?")&&(this.userResults=[],localStorage.removeItem("testResults"))},editQuestion(e){this.editedIndex=e,this.editedQuestion=JSON.parse(JSON.stringify(this.questions[e]))},saveEdit(e){this.questions[e]=JSON.parse(JSON.stringify(this.editedQuestion)),localStorage.setItem("testQuestions",JSON.stringify(this.questions)),this.editedIndex=null},cancelEdit(){this.editedIndex=null},downloadResultsAsExcel(){const e=this.userResults.map(((e,t)=>({"#":t+1,Foydalanuvchi:e.name||e.username,Ball:e.score,"Jami Savollar":e.total||"-",Foiz:e.percentage||"-"}))),t=K.Wp.json_to_sheet(e),n=K.Wp.book_new();K.Wp.book_append_sheet(n,t,"Natijalar");const s=K.M9(n,{bookType:"xlsx",type:"array"}),i=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});W()(i,"foydalanuvchi_natijalari.xlsx")},toggleSelectAll(){this.selectAll?this.selectedQuestions=[]:this.selectedQuestions=this.questions.map(((e,t)=>t)),this.selectAll=!this.selectAll},addOption(){this.newQuestion.options.length<6?this.newQuestion.options.push(""):alert("Ko‘pi bilan 6 ta variant qo‘shishingiz mumkin!")},removeOption(e){this.newQuestion.options.splice(e,1)},addQuestion(){this.newQuestion.text.trim()&&!this.newQuestion.options.some((e=>!e.trim()))&&this.newQuestion.correct.trim()?(this.questions.push({...this.newQuestion}),localStorage.setItem("testQuestions",JSON.stringify(this.questions)),this.newQuestion={text:"",options:["","","",""],correct:""}):alert("Barcha maydonlarni to‘ldiring!")},removeSelectedQuestions(){this.questions=this.questions.filter(((e,t)=>!this.selectedQuestions.includes(t))),localStorage.setItem("testQuestions",JSON.stringify(this.questions)),this.selectedQuestions=[],this.selectAll=!1},toggleSelection(e){this.selectedQuestions.includes(e)?this.selectedQuestions=this.selectedQuestions.filter((t=>t!==e)):this.selectedQuestions.push(e)},removeQuestion(e){confirm("Haqiqatan ham ushbu savolni o‘chirmoqchimisiz?")&&(this.questions.splice(e,1),localStorage.setItem("testQuestions",JSON.stringify(this.questions)))},async uploadFile(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=async e=>{const t=e.target.result;$.ni({arrayBuffer:t}).then((e=>{const t=e.value;this.parseQuestions(t)})).catch((e=>console.error("Xatolik: ",e)))},e.readAsArrayBuffer(t)}},parseQuestions(e){const t=e.split("\n");let n=null;t.forEach((e=>{e=e.trim(),e.match(/^\d+\./)?(n&&this.questions.push(n),n={text:e.replace(/^\d+\.\s*/,""),options:[],correct:""}):e.match(/^[A-E]\)/)?n.options.push(e.replace(/^[A-E]\)\s*/,"")):e.includes("To‘g‘ri javob:")&&(n.correct=e.split(":")[1].trim())})),n&&this.questions.push(n),localStorage.setItem("testQuestions",JSON.stringify(this.questions))},downloadQuestions(){let e="Test Savollari\n\n";this.questions.forEach(((t,n)=>{e+=`${n+1}. ${t.text}\n`,t.options.forEach(((t,n)=>{e+=`   ${String.fromCharCode(65+n)}) ${t}\n`})),e+=`   To‘g‘ri javob: ${t.correct}\n\n`}));const t=new Blob([e],{type:"application/msword"});W()(t,"test_savollari.doc")}}};const D=(0,u.A)(M,[["render",B],["__scopeId","data-v-6a430816"]]);var Y=D;const H=[{path:"/",component:R},{path:"/admin",component:Y}],G=(0,d.aE)({history:(0,d.LA)(),routes:H});var Z=G;const ee=(0,s.Ef)(c);ee.use(Z),ee.mount("#app")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,s,i,o){if(!s){var l=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],o=e[c][2];for(var a=!0,u=0;u<s.length;u++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](s[u])}))?s.splice(u--,1):(a=!1,o<l&&(l=o));if(a){e.splice(c--,1);var r=i();void 0!==r&&(t=r)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,o,l=s[0],a=s[1],u=s[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(u)var c=u(n)}for(t&&t(s);r<l.length;r++)o=l[r],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},s=self["webpackChunkeduchiko"]=self["webpackChunkeduchiko"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(1409)}));s=n.O(s)})();
//# sourceMappingURL=app.cdd4563d.js.map